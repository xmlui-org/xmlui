<Component name="Markup">

  <Markdown><![CDATA[
# XML Markup

When you write XML markup to create an XMLUI app, you use XML tags to name components. And you use XML attributes to set properties that govern their behavior.

## Properties

An attribute may be a literal string that sets the value of a property.
]]></Markdown>


<HStack verticalAlignment="center">
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui
<Text value="This is rendered as text." />
```
]]></Markdown>

    </Stack>

    <SpaceFiller />

    <Stack width="50%">

      <Markdown><![CDATA[
```xmlui-pg  name="A literal property"
<Text value="This is rendered as text." />
```
</Stack>
</HStack>
]]></Markdown>

    </Stack>
  </HStack>

<Markdown><![CDATA[
## Expressions

An attribute may also be a JavaScript expression — enclosed in curly braces `{ }` — that dynamically sets the value of a property.
]]></Markdown>

<HStack
    verticalAlignment="center">

    <Stack width="50%">

      <Markdown><![CDATA[
```xmlui
<Text value="Life, the universe, and everything: { 6 * 7 }" />
```
]]></Markdown>

    </Stack>

    <SpaceFiller />

    <Stack width="50%">

      <Markdown><![CDATA[
```xmlui-pg name="A dynamic property"
<Text value="Life, the universe, and everything: { 6 * 7 }" />
```
</Stack>
</HStack>
]]></Markdown>

    </Stack>
  </HStack> An expression can hold a JSON list. <HStack
    verticalAlignment="center">
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui
<Items data="{ [ 'Bakerloo', 'Central', 'Circle'] }"
<Text> $item </Text>
</Items>
```
]]></Markdown>
    </Stack>
    <SpaceFiller />
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui-pg name="A JSON list"
<Items data="{ [ 'Bakerloo', 'Central', 'Circle'] }" >
<Text> { $item } </Text>
</Items>
```
</Stack>
</HStack>
]]></Markdown>
    </Stack>
  </HStack>

<Markdown><![CDATA[
Or a complex JSON object, in which case you'll write an outer set of curly braces to introduce the expression and an inner set to define an object like this form's `data` property.
]]></Markdown>

<HStack
    verticalAlignment="center">
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui
<Form id="searchForm" padding="0.5rem"
  data='{ { station: "Brixton", wifi: true, toilets: false } }'
  onSubmit="() => { preview.setValue(JSON.stringify($data)) }"
>
    <Text>Search for station amenities</Text>
    <HStack>
      <FormItem bindTo="station" />
      <FormItem type="checkbox" label="wifi" bindTo="wifi" />
      <FormItem type="checkbox" label="toilets" bindTo="toilets" />
    </HStack>
    <property name="buttonRowTemplate">
        <Button id="search" type="submit" icon="search" label="Search"/>
    </property>
</Form>

<TextArea id="preview" />
```
]]></Markdown>
    </Stack>
    <SpaceFiller />
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui-pg name="A complex JSON object"
<Form id="searchForm" padding="0.5rem"
  data='{{ station: "Brixton", wifi: true, toilets: false }}'
  onSubmit="() => { preview.setValue(JSON.stringify($data)) }"
>
    <Text>Search for station amenities</Text>
    <HStack>
      <FormItem bindTo="station" />
      <FormItem type="checkbox" label="wifi" bindTo="wifi" />
      <FormItem type="checkbox" label="toilets" bindTo="toilets" />
    </HStack>
    <property name="buttonRowTemplate">
        <Button type="submit" icon="search" label="Search"/>
    </property>
</Form>

<TextArea id="preview" />
```
</Stack>
</HStack>
]]></Markdown>

    </Stack>
  </HStack>

<Markdown><![CDATA[
> [!INFO]
> In addition to a literal string or an expression, you will sometimes use the special tag `<property>` to set a value using markup, like the `ButtonRowTemplate` that defines this form's button.
]]></Markdown>

<H2>Variables</H2> A
  component may declare a variable that's visible to itself and its children. Variable names start
  with a letter or an underscore (`_`) and continue with these characters or digits. <Markdown><![CDATA[
You can declare a variable using the `var` prefix.
]]></Markdown>

<HStack
    verticalAlignment="center">
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui
<App var.stations="{ [ 'Bakerloo', 'Central', 'Circle'] }">
  <Items data="{stations"}>
    <Text>{$item}</Text>
  </Items>
</App>
```
]]></Markdown>
    </Stack>
    <SpaceFiller />
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui-pg name="Declaring a variable with var"
<App var.stations="{ [ 'Bakerloo', 'Central', 'Circle'] }">
  <Items data="{stations}">
    <Text> {$item} </Text>
  </Items>
</App>
```
</Stack>
</HStack>
]]></Markdown>
    </Stack>
  </HStack>

<Markdown><![CDATA[
Or using the `<variable>` helper tag.
]]></Markdown>

<HStack
    verticalAlignment="center">
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui
<App>
  <variable
    name="stations"
    value="{ [ 'Bakerloo', 'Central', 'Circle'] }" />
  <Items data="{stations}">
    <Text>{$item}</Text>
  </Items>
</App>
```
]]></Markdown>
    </Stack>
    <SpaceFiller />
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui-pg name="Declaring a variable with <variable>"
<App>
  <variable
    name="stations"
    value="{ [ 'Bakerloo', 'Central', 'Circle'] }" />
  <Items data="{stations}">
    <Text>{$item}</Text>
  </Items>
</App>
```
</Stack>
</HStack>
]]></Markdown>
    </Stack>
  </HStack>


<H3>Nested variables</H3>

The same variable name can be declared in nested scopes. The engine resolves the name to the variable in the closest (innermost) scope.

<HStack verticalAlignment="center">
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui
<App var.title="var.title is 'Hello, from App!'">
  <H1>{title}</H1>
  <VStack var.title="title is 'Hello, from VStack'!">
    <Text>{title}</Text>
  </VStack>
</App>
```
]]></Markdown>
    </Stack>
    <SpaceFiller />
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui-pg name="Defining and using nested variables"
<App var.title="var.title is 'Hello, from App!'">
  <H1>{title}</H1>
  <VStack var.title="var.title is 'Hello, from VStack'!">
    <Text>{title}</Text>
  </VStack>
</App>
```
]]></Markdown>
    </Stack>
  </HStack>

<H3>Reactive variables</H3>

<Markdown><![CDATA[
In [Reactive data binding](/reactive-intro) we saw how a `Select` can cause a `Table` to refresh by setting the `url` property of the `DataSource` on which the `Table` depends. Here's a more basic example of how components interact with reactive variables.
]]></Markdown>

<HStack verticalAlignment="center">
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui
<App var.count="{0}" var.countTimes3="{3 * count}" >
  <Button
    label="Click to increment the count"
    onClick="count++" />
  <Text>Click count = {count}</Text>
  <Text>Click count * 3 = {countTimes3}</Text>
</App>
```
]]></Markdown>
    </Stack>
    <SpaceFiller />
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui-pg name="Defining and using reactive variables"
<App var.count="{0}" var.countTimes3="{3 * count}" >
  <Button
    label="Click to increment the count"
    onClick="count++" />
  <Text>Click count = {count} (changes directly)</Text>
  <Text>Click count * 3 = {countTimes3} (changes indirectly)</Text>
</App>
```
]]></Markdown>
    </Stack>
  </HStack>

<Markdown><![CDATA[
The `Button`'s click handler increments `count` directly. But because `countTimes3` is define using an expression that refers to `count`, the engine reevalautes that expression each time `count` changes and updates `countTimes3` indirectly.
]]></Markdown>

<H3>Event handlers</H3>

<Markdown><![CDATA[
We've seen two ways to declare variables: a `var` declaration in an XML attribute, or the `variable` tag. A similar pattern applies to event handlers. The `Button` to increment the count declares its handler in an attribute whose name combines the `on` prefix with the name [click](/components/Button#click). You may also use the `<event>` helper tag with no prefix for the event name.
]]></Markdown>

<HStack verticalAlignment="center">
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui
<App var.count="{0}" >
  <Button label="Click to increment the count">
    <event name="click">
      { count++ }
    </event>
    <Text>Click count = {count}</Text>
  </Button>
</App>
```
]]></Markdown>
    </Stack>
    <SpaceFiller />
    <Stack width="50%">
      <Markdown><![CDATA[
```xmlui-pg name="Declare an event handler using the <event> tag"
<App var.count="{0}" >
  <Button label="Click to increment the count">
    <event name="click">
      { count++ }
    </event>
    <Text>Click count = {count}</Text>
  </Button>
</App>
```
]]></Markdown>
    </Stack>
  </HStack>

<Markdown><![CDATA[
> [!INFO]
> Why use the `<event>` tag? In this example there's no reason to prefer it. But as we saw above, you declare a `Form`'s `buttonRowTemplate` property in XMLUI markup using the `<property>` helper tag. The same pattern applies when a button's handler is an XMLUI component like `<APICall>`.
> ```
>   <Button label="Click to increment the count on the server">
>    <event name="click">
>      <APICall url="/count/increment" />
>    </event>
>    <Text>Click count = {count}</Text>
>  </Button>
]]></Markdown>
</Component>