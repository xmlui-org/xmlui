import data from  "../../component-samples/List/list-component-data.js";

# List

The `List` component is a robust layout container that renders associated data items as a 
list of components. `List` is virtualized; it renders only items that are visible in the 
viewport.

In the following examples all use the same list of data which looks like so:

| Id   | Name    | Quantity | Unit   | Category   |
| :--- | :------ | :------- | :----- | :--------- |
| 0    | Apples  | 5        | pieces | fruits     |
| 1    | Bananas | 6        | pieces | fruits     |
| 2    | Carrots | 100      | grams  | vegetables |
| 3    | Spinach | 1        | bunch  | vegetables |
| 4    | Milk    | 10       | liter  | diary      |
| 5    | Cheese  | 200      | grams  | diary      |

The data is provided as JSON.

## Context Variables

### `$item`

This property represents the value of an item in the data list.

## Properties

### `data`

The component receives data via this property.
The `data` prop is a list of items that the `List` can display.

The component receives its data via this property.
The `data` prop is an array of items that the `List` can display.

Note how the `List` infers the given data and provides a simple layout for it.
To tweak what data and how it is displayed, see the [`itemTemplate` section](#itemtemplate).

```ueml copy
<List data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: data"
  height={400}
  app={`<List data='{${JSON.stringify(data)}}' />`}
/>

### `defaultSections`

This property adds default sections for the `List` and displays the section headers
even if no items fall into a particular section.

This property adds default sections for the `List` and displays the section headers even if no items fall into a particular section.

Note the `meat` section header before all the others in the list below:

> **Note:** For the `defaultSections` prop to work, the data must be sectioned using the [`sectionBy`](#sectionby) prop,
> and either a [`sectionTemplate`](#sectiontemplate) or a [`sectionFooterTemplate`](#sectionfootertemplate) needs to be provided.

```ueml copy {3}
<List 
  data='{${JSON.stringify(data)}}'
  defaultSections="{['meat']}"
  sectionBy="category"
>
  <prop name="sectionTemplate">
    <Stack padding="$space-2">
      <Text variant="subtitle" value="{$item.sectionKey}" />
    </Stack>
  </prop>
</List>
```

<Playground
  previewOnly
  name="Example: defaultSections"
  height={400}
  app={`
  <List 
    data='{${JSON.stringify(data)}}'
    defaultSections="{['meat']}"
    sectionBy="category"
  >
    <prop name="sectionTemplate">
      <Stack padding="$space-2">
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </Stack>
    </prop>
  </List>
  `}
/>

### `emptyListTemplate`

This prop displays the given component as a placeholder
if the `loader` prop is false and the `data` items length is 0 or is not set.

```ueml copy
<List>
  <prop name="emptyListTemplate">
    <Stack width="100%" horizontalAlignment="center">
      <Text variant="strong" value="Empty..." />
    </Stack>
  </prop>
</List>
```

<Playground
  previewOnly
  name="Example: emptyListTemplate"
  height={100}
  app={`
  <List>
    <prop name="emptyListTemplate">
      <Stack width="100%" horizontalAlignment="center">
        <Text variant="strong" value="Empty..." />
      </Stack>
    </prop>
  </List>
  `}
/>

### `idKey`

Denotes which attribute of an item acts as the ID or key of the item.
Default is `"id"`.

```ueml /idKey="key"/
<List idKey="key" data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: idKey"
  height={400}
  app={`<List idKey="key" data='{${JSON.stringify(data)}}' />`}
/>

### `itemTemplate`

This prop allows the customization of mapping data items to components.
You can use the `$item` syntax to access an item and map its individual attributes.

Note how in the example below the `$item` is used to access the `name`, `quantity` and `unit` attributes.

```ueml copy {2-12}
<List data="{[...]}">
  <prop name="itemTemplate">
    <Card>
      <HStack verticalAlignment="center" gap="0.5rem">
        <Icon name="info" />
        <Text value="{$item.name}" variant="strong" />
      </HStack>
      <HStack gap="0.5rem">
        <Text value="{$item.quantity}" />
        <Text value="{$item.unit}" variant="em" />
      </HStack>
    </Card>
  </prop>
</List>
```

<Playground
  previewOnly
  name="Example: itemTemplate"
  height={400}
  app={`
  <List data='{${JSON.stringify(data)}}'>
    <prop name="itemTemplate">
      <Card>
        <HStack verticalAlignment="center" gap="0.5rem">
          <Icon name="info" />
          <Text value="{$item.name}" variant="strong" />
        </HStack>
        <HStack gap="0.5rem">
          <Text value="{$item.quantity}" />
          <Text value="{$item.unit}" variant="em" />
        </HStack>
      </Card>
    </prop>
  </List>
  `}
/>

### `limit`

This property limits the number of items displayed in the `List`.

```ueml /limit="4"/
<List limit="4" data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: limit"
  height={400}
  app={`<List limit="4" data='{${JSON.stringify(data)}}' />`}
/>

### `loading`

The `loading` prop delays the rendering of children until it is set to false,
or the component receives usable list items via the [`data`](#data) prop.

```ueml copy
<List loading="true" />
```

<Playground
  previewOnly
  name="Example: loading"
  height={60}
  app={`<List loading="true" />`}
/>

### `orderBy`

This prop enables the ordering of list items by specifying an attribute in the data.

```ueml /orderBy="{{ field: 'quantity', direction: 'desc' }}"/
<List orderBy="{{ field: 'quantity', direction: 'desc' }}" data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: orderBy"
  height={400}
  app={`<List orderBy="{{ field: 'quantity', direction: 'desc' }}" data='{${JSON.stringify(data)}}' />`}
/>

### `scrollAnchor`

This prop pins the scroll position to either the `top` or the `bottom` of the list.

```ueml /scrollAnchor="bottom"/
<List scrollAnchor="bottom" data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: scrollAnchor"
  height={400}
  app={`<List scrollAnchor="bottom" data='{${JSON.stringify(data)}}' />`}
/>

### `sectionBy`

This property set which attribute of the data is used to group or section the list items.
If the attribute does not appear in the data items, it will be ignored.

> **Note:** For the `sectionBy` prop to work, either a [`sectionTemplate`](#sectiontemplate)
> or a [`sectionFooterTemplate`](#sectionfootertemplate) needs to be provided.

```ueml copy {3}
<List 
  data='{${JSON.stringify(data)}}'
  defaultSections="{['meat']}"
  sectionBy="category"
>
  <prop name="sectionTemplate">
    <Stack padding="$space-2">
      <Text variant="subtitle" value="{$item.sectionKey}" />
    </Stack>
  </prop>
</List>
```

<Playground
  previewOnly
  name="Example: sectionBy"
  height={400}
  app={`
  <List 
    data='{${JSON.stringify(data)}}'
    defaultSections="{['meat']}"
    sectionBy="category"
  >
    <prop name="sectionTemplate">
      <Stack padding="$space-2">
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </Stack>
    </prop>
  </List>
  `}
/>

### `sectionFooterTemplate`

Enables the customization of how the the footer of each section or group id displayed.
Combine with [`sectionTemplate`](#sectiontemplate) to customize sections.
You can use the 
`$item`
 syntax to access an item section and map its individual attributes.

The structure of `$item` in a `sectionFooterTemplate` is different compared to the one used in [`itemTemplate`](#itemtemplate).
An `$item` here looks like the following:

| Attribute    | Description                                                                                                   |
| ------------ | ------------------------------------------------------------------------------------------------------------- |
| id           | Unique identifier for the section. It is commonly generated from the attribute name provided via `sectionBy`. |
| sectionItems | The items filtered from the original data list that fall into this section.                                   |
| sectionKey   | The attribute name to section by provided via `sectionBy`                                                     |

```ueml copy {7-9}
<List data='{${JSON.stringify(data)}}' sectionBy="category">
  <prop name="sectionTemplate">
    <Stack padding="$space-2">
      <Text variant="subtitle" value="{$item.sectionKey}" />
    </Stack>
  </prop>
  <prop name="sectionFooterTemplate">
    <ContentSeparator />
  </prop>
</List>
```

<Playground
  previewOnly
  name="Example: sectionFooterTemplate"
  height={400}
  app={`
  <List data='{${JSON.stringify(data)}}' sectionBy="category">
    <prop name="sectionTemplate">
      <Stack padding="$space-2">
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </Stack>
    </prop>
    <prop name="sectionFooterTemplate">
      <ContentSeparator />
    </prop>
  </List>
  `}
/>

### `sectionTemplate`

Enables the customization of how the sections or groups are displayed, similarly to the [`itemTemplate`](#itemtemplate).
You can use the 
`$item`
 syntax to access an item section and map its individual attributes.

The structure of `$item` in a `sectionTemplate` is different compared to the one used in [`itemTemplate`](#itemtemplate).
An `$item` here looks like the following:

| Attribute    | Description                                                                                                   |
| ------------ | ------------------------------------------------------------------------------------------------------------- |
| id           | Unique identifier for the section. It is commonly generated from the attribute name provided via `sectionBy`. |
| sectionItems | The items filtered from the original data list that fall into this section.                                   |
| sectionKey   | The attribute name to section by provided via `sectionBy`                                                     |

```ueml copy {2-6}
<List data='{${JSON.stringify(data)}}' sectionBy="category">
  <prop name="sectionTemplate">
    <Stack padding="$space-2">
      <Text variant="subtitle" value="{$item.sectionKey}" />
    </Stack>
  </prop>
</List>
```

<Playground
  previewOnly
  name="Example: sectionTemplate"
  height={400}
  app={`
  <List data='{${JSON.stringify(data)}}' sectionBy="category">
    <prop name="sectionTemplate">
      <Stack padding="$space-2">
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </Stack>
    </prop>
  </List>
  `}
/>

### `selectedIndex`

This prop scrolls to a specific item indicated by its index.

Issue: Currently not working

```ueml /selectedIndex="5"/
<List selectedIndex="5" data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: selectedIndex"
  height={400}
  app={`<List selectedIndex="5" data='{${JSON.stringify(data)}}' />`}
/>

## API

This component does not provide any API.

## Events

This component does not have any events.

## Styling

`List` is a layout container; its purpose is to render nested child components.
`List` has no theme variables to change its visual appearance.
