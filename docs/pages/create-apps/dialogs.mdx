# Modal Dialogs

Modal dialogs communicate some information and require a response or confirmation from the user.
Modal means that the user is unable to continue their work and must address the information in the dialog window before continuing.
They are useful to request confirmation for a critical action, show a form or other easily closable content.

Modal dialogs are an inherent part of XMLUI.
Dialogs can be invoked both declaratively in markup, or imperatively in codebehind.

The following example shows a simple example of a dialog with details about a user:

```ueml copy
<App>
  <var name="isDialogShown" value="{false}"/>
  <ModalDialog
    when="{isDialogShown}"
    title="John Doe"
    onClose="isDialogShown = false">
    John is always number one to the coffee machine.
    He has a competitive personality but gets along with a lot people.
  </ModalDialog>
  <NavPanel>
    <NavLink label="Users" to="/" icon="user" />
  </NavPanel>
  <Pages>
    <Page url="/">
      <Card
        avatarUrl="https://i.pravatar.cc/100"
        title="John Doe"
        subtitle="Executive Manager">
        John is pretty smart when it comes to business.
        <Button label="Details" onClick="isDialogShown = true" />
      </Card>
    </Page>
  </Pages>
</App>
```

<Playground
  name="Example: Simple Dialog"
  previewOnly
  app={`
  <App>
    <var name="isDialogShown" value="{false}"/>
    <ModalDialog
      when="{isDialogShown}"
      title="John Doe"
      onClose="isDialogShown = false">
      John is always number one to the coffee machine.
      He has a competitive personality but gets along with a lot people.
    </ModalDialog>
    <NavPanel>
      <NavLink label="Users" to="/" icon="user" />
    </NavPanel>
    <Pages>
      <Page url="/">
        <Card
          avatarUrl="https://i.pravatar.cc/100"
          title="John Doe"
          subtitle="Executive Manager">
          John is pretty smart when it comes to business.
          <Button label="Details" onClick="isDialogShown = true" />
        </Card>
      </Page>
    </Pages>
  </App>
  `}
/>

## Declarative Approach

The example in the introduction uses a `ModelDialog` component with the `when` property to toggle the visibility of the dialog component.
The `isDialogShown` variable is a boolean that is linked to the display of the dialog: if the variable is set to `true`, the dialog is shown.

In XMLUI, we call this a declarative approach to display a dialog.
Its usefulness comes from the fact that this provides the opportunity to update the app URL and provide query params to the dialog.

TODO: add query params

```ueml copy
<App>
  <var name="isDialogShown" value="{false}"/>
  <ModalDialog
    when="{isDialogShown}"
    title="John Doe"
    onClose="isDialogShown = false">
    John is always number one to the coffee machine.
    He has a competitive personality but gets along with a lot people.
  </ModalDialog>
  <NavPanel>
    <NavLink label="Users" to="/" icon="user" />
  </NavPanel>
  <Pages>
    <Page url="/">
      <Card
        avatarUrl="https://i.pravatar.cc/100"
        title="John Doe"
        subtitle="Executive Manager">
        John is pretty smart when it comes to business.
        <Button label="Details" onClick="isDialogShown = true" />
      </Card>
    </Page>
  </Pages>
</App>
```

<Playground
  name="Example: Declarative Dialog"
  previewOnly
  app={`
  <App>
    <var name="isDialogShown" value="{false}"/>
    <ModalDialog
      when="{isDialogShown}"
      title="John Doe"
      onClose="isDialogShown = false">
      John is always number one to the coffee machine.
      He has a competitive personality but gets along with a lot people.
    </ModalDialog>
    <NavPanel>
      <NavLink label="Users" to="/" icon="user" />
    </NavPanel>
    <Pages>
      <Page url="/">
        <Card
          avatarUrl="https://i.pravatar.cc/100"
          title="John Doe"
          subtitle="Executive Manager">
          John is pretty smart when it comes to business.
          <Button label="Details" onClick="isDialogShown = true" />
        </Card>
      </Page>
    </Pages>
  </App>
  `}
/>

{/* Click on the button in the demo below to open the modal dialog.
Click anywhere outside the opened dialog or the close button on the dialog itself to close it. */}

## Imperative Approach

The `ModalDialog` component supports an imperative approach to toggling its visibility as well.
This is done by utilizing export member functions such as `open()` and `close()`.
Using this approach can also be done in codebehind.

The only downside to this approach is that there is no way to provide the `ModalDialog` with query parameters.

```ueml copy {3} /onClick="dialog.open()"/ /onClick="dialog.close()"/
<App>
  <ModalDialog
    id="dialog"
    title="John Doe">
    John is always number one to the coffee machine.
    He has a competitive personality but gets along with a lot people.
    <Button label="Close" onClick="dialog.close()" />
  </ModalDialog>
  <NavPanel>
    <NavLink label="Users" to="/" icon="user" />
  </NavPanel>
  <Pages>
    <Page url="/">
      <Card
        avatarUrl="https://i.pravatar.cc/100"
        title="John Doe"
        subtitle="Executive Manager">
        John is pretty smart when it comes to business.
        <Button label="Details" onClick="dialog.open()" />
      </Card>
    </Page>
  </Pages>
</App>
```

<Playground
  name="Example: Imperative Dialog"
  previewOnly
  app={`
  <App>
    <ModalDialog
      id="dialog"
      title="John Doe">
      John is always number one to the coffee machine.
      He has a competitive personality but gets along with a lot people.
      <Button label="Close" onClick="dialog.close()" />
    </ModalDialog>
    <NavPanel>
      <NavLink label="Users" to="/" icon="user" />
    </NavPanel>
    <Pages>
      <Page url="/">
        <Card
          avatarUrl="https://i.pravatar.cc/100"
          title="John Doe"
          subtitle="Executive Manager">
          John is pretty smart when it comes to business.
          <Button label="Details" onClick="dialog.open()" />
        </Card>
      </Page>
    </Pages>
  </App>
  `}
/>

## Interoperability with Forms

TODO

## Confirmation for API Calls

The `ModalDialog` component is also used for confirming certain actions such as API requests.
The component itself is built into the `APICall` component and by calling exposed properties,
you can do simple customizations to a dialog which needed to be displayed before the request is sent. 

```ueml copy {4-6}
<App>
  <Form>
    <H2>Send Request</H2>
    Click on the `Save` button to trigger the confirmation dialog.
    Reload the application to try again after clicking "Yes!" in the dialog.
    <event name="submit">
      <APICall
        url="/api/will-not-throw"
        method="post"
        confirmTitle="Save Data"
        confirmMessage="Are you sure you want to send this request and close the dialog?"
        confirmButtonLabel="Yes!" />
    </event>
  </Form>
</App>
```

<Playground
  name="Example: Confirmation Dialog"
  previewOnly
  app={`
  <App>
    <Form>
      <H2>Send Request</H2>
      Click on the \`Save\` button to trigger the confirmation dialog.
      Reload the application to try again after clicking "Yes!" in the dialog.
      <event name="submit">
        <APICall
          url="/api/will-not-throw"
          method="post"
          confirmTitle="Save Data"
          confirmMessage="Are you sure you want to send this request and close the dialog?"
          confirmButtonLabel="Yes!" />
      </event>
    </Form>
  </App>
  `}
/>

## Further Customization

TODO: rework this to help with understanding customization and link to Forms

The `ModalDialog` component lets you customize some parts of it directly.
For example, the cancel button can be hidden and a prestyled title can also be added to dialogs.

```ueml copy /title="Example Dialog"/ /closeButtonVisible="false"/
<App>
  <Button label="Open Dialog" onClick="dialog.open()" />
  <ModalDialog id="dialog" title="Example Dialog" closeButtonVisible="true">
    <Button label="Close Dialog" onClick="dialog.close()" />
  </ModalDialog>
</App>
```

<Playground
  name="Example: Customization"
  previewOnly
  app={`
  <App>
    <Button label="Open Dialog" onClick="dialog.open()" />
    <ModalDialog id="dialog" title="Example Dialog" closeButtonVisible="true">
      <Button label="Close Dialog" onClick="dialog.close()" />
    </ModalDialog>
  </App>
  `}
/>

TODO: place link to component reference here
