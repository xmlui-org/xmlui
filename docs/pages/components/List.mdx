import { Callout } from "nextra/components";

import data from  "../../component-samples/List/list-component-data.js";

# List [#component-list]

<Callout type="warning" emoji="ðŸ“”">This component is in an **experimental** state; you can use it in your app. However, we may modify it, and it may even have breaking changes in the future.</Callout>

The `List` component is a robust layout container that renders associated data items as a list of components. `List` is virtualized; it renders only items that are visible in the viewport.

In the following examples all use the same list of data which looks like so:

| Id   | Name    | Quantity | Unit   | Category   |
| :--- | :------ | :------- | :----- | :--------- |
| 0    | Apples  | 5        | pieces | fruits     |
| 1    | Bananas | 6        | pieces | fruits     |
| 2    | Carrots | 100      | grams  | vegetables |
| 3    | Spinach | 1        | bunch  | vegetables |
| 4    | Milk    | 10       | liter  | diary      |
| 5    | Cheese  | 200      | grams  | diary      |

The data is provided as JSON.

## Properties

### `availableSections`

This property is an array of section names that the `List` will display.

### `data`

The component receives data via this property. The `data` property is a list of items that the `List` can display.

Note how the `List` infers the given data and provides a simple layout for it.
To tweak what data and how it is displayed, see the [`itemTemplate` section](#itemtemplate).

```ueml copy
<App>
  <List data='{[...]}' />
</App>
```

<Playground
  name="Example: data"
  height={400}
  app={`
    <App>
      <List data='{${JSON.stringify(data, null, 2)}}' />
    </App>
  `}
/>

You can also provide the `List` with data directly from an API via this property.

In the example below, the `List` also uses the `itemTemplate` property to access the data attributes as well.
See the [itemTemplate section](#itemtemplate).

```ueml copy {2}
<App>
  <List data='https://api.spacexdata.com/v3/rockets'>
    <property name="itemTemplate">
      <Card>
        <Image height="100px" fit="cover" src="{$item.flickr_images[0]}"/>
        <Text value="{$item.country}" />
        <Text value="{$item.company}" variant="strong" />
      </Card>
    </property>
  </List>
</App>
```

<Playground
  name="Example: data API Call"
  height={400}
  app={`
  <App>
    <List data='https://api.spacexdata.com/v3/rockets'>
      <property name="itemTemplate">
        <Card>
          <Image height="100px" fit="cover" src="{$item.flickr_images[0]}"/>
          <Text value="{$item.country}" />
          <Text value="{$item.company}" variant="strong" />
        </Card>
      </property>
    </List>
  </App>
  `}
/>

### `defaultSections`

This property adds default sections for the `List` and displays the section headers even if no items fall into a particular section.

Note the `meat` section header before all the others in the list below:

<Callout type="info" emoji="ðŸ“”">
For the `defaultSections` property to work, the data must be sectioned using the [`sectionBy`](#sectionby) property,
and either a [`sectionTemplate`](#sectiontemplate) or a [`sectionFooterTemplate`](#sectionfootertemplate) needs to be provided.
</Callout>

```ueml copy {4}
<App>
  <List
    data='{[...]}'
    defaultSections="{['meat']}"
    sectionBy="category" >
    <property name="sectionTemplate">
      <VStack>
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </VStack>
    </property>
  </List>
</App>
```

<Playground
  name="Example: defaultSections"
  height={400}
  app={`
    <App>
      <List
        data='{${JSON.stringify(data, null, 2)}}'
        defaultSections="{['meat']}"
        sectionBy="category">
        <property name="sectionTemplate">
          <VStack>
            <Text variant="subtitle" value="{$item.sectionKey}" />
          </VStack>
        </property>
      </List>
    </App>
  `}
/>

### `emptyListTemplate`

This property defines the template to display when the list is empty.

```ueml copy
<App>
  <List>
    <property name="emptyListTemplate">
      <VStack horizontalAlignment="center">
        <Text variant="strong" value="Empty..." />
      </VStack>
    </property>
  </List>
</App>
```

<Playground
  name="Example: emptyListTemplate"
  height={140}
  app={`
    <App>
      <List>
        <property name="emptyListTemplate">
          <VStack horizontalAlignment="center">
            <Text variant="strong" value="Empty..." />
          </VStack>
        </property>
      </List>
    </App>
  `}
/>

### `idKey`

Denotes which attribute of an item acts as the ID or key of the item. Default is `"id"`.

```ueml /idKey="key"/
<App>
  <List idKey="key" data='{[...]}' />
</App>
```

<Playground
  name="Example: idKey"
  height={400}
  app={`
    <App>
      <List idKey="key" data='{${JSON.stringify(data, null, 2)}}' />
    </App>
  `}
/>

### `itemTemplate`

This property allows the customization of mapping data items to components. You can use the `$item` context variable to access an item and map its individual attributes.

Note how in the example below the `$item` is used to access the `name`, `quantity` and `unit` attributes.

```ueml copy {2-12}
<App>
  <List data='{[...]}'>
    <property name="itemTemplate">
      <Card>
        <HStack verticalAlignment="center" gap="0.5rem">
          <Icon name="info" />
          <Text value="{$item.name}" variant="strong" />
        </HStack>
        <HStack gap="0.5rem">
          <Text value="{$item.quantity}" />
          <Text value="{$item.unit}" variant="em" />
        </HStack>
      </Card>
    </property>
  </List>
</App>
```

<Playground
  name="Example: itemTemplate"
  height={400}
  app={`
    <App>
      <List data='{${JSON.stringify(data, null, 2)}}'>
        <property name="itemTemplate">
          <Card>
            <HStack verticalAlignment="center" gap="0.5rem">
              <Icon name="info" />
              <Text value="{$item.name}" variant="strong" />
            </HStack>
            <HStack gap="0.5rem">
              <Text value="{$item.quantity}" />
              <Text value="{$item.unit}" variant="em" />
            </HStack>
          </Card>
        </property>
      </List>
    </App>
  `}
/>

### `items`

You can use `items` as an alias for the `data` property. When you bind the list to a data source (e.g. an API endpoint), the `data` acts as the property that accepts a URL to fetch information from an API.When both `items` and `data` are used, `items` has priority.

### `limit`

This property limits the number of items displayed in the `List`.

```ueml /limit="4"/
<App>
  <List limit="4" data='{[...]}' />
</App>
```

<Playground
  name="Example: limit"
  height={400}
  app={`
    <App>
      <List limit="4" data='{${JSON.stringify(data, null, 2)}}' />
    </App>
  `}
/>

### `loading`

This property delays the rendering of children until it is set to `false`, or the component receives usable list items via the [`data`](#data) property.

```ueml copy
<App>
  <List loading="true" />
</App>
```

<Playground
  name="Example: loading"
  height={120}
  app={`
    <App>
      <List loading="true" />
    </App>
  `}
/>

### `orderBy`

This property enables the ordering of list items by specifying an attribute in the data.

```ueml /orderBy="{{ field: 'quantity', direction: 'desc' }}"/
<App>
  <List orderBy="{{ field: 'quantity', direction: 'desc' }}" data='{[...]}' />
</App>
```

<Playground
  name="Example: orderBy"
  height={400}
  app={`
    <App>
      <List 
        orderBy="{{ field: 'quantity', direction: 'desc' }}" 
        data='{${JSON.stringify(data, null, 2)}}' />
    </App>
  `}
/>

### `pageInfo`

This property contains the current page information. Setting this property also enures the `List` uses pagination.

It contains the following boolean attributes:

| Attribute            | Description                          |
| :------------------- | :------------------------------------|
| `hasPrevPage`        | Does the list have a previous page   |
| `hasNextPage`        | Does the list have a next page       |
| `isFetchingPrevPage` | _TBD_                                |
| `isFetchingNextPage` | _TBD_                                |

### `scrollAnchor`

This property pins the scroll position to either the `top` or the `bottom` of the list.

```ueml /scrollAnchor="bottom"/
<App>
  <List scrollAnchor="bottom" data='{${JSON.stringify(data, null, 2)}}' />
</App>
```

<Playground
  name="Example: scrollAnchor"
  height={400}
  app={`
    <App>
      <List scrollAnchor="bottom" data='{${JSON.stringify(data, null, 2)}}' />
    </App>
  `}
/>

### `sectionBy`

This property set which attribute of the data is used to group or section the list items. If the attribute does not appear in the data items, it will be ignored.

<Callout type="info" emoji="ðŸ“”">
For the `sectionBy` property to work, either a [`sectionTemplate`](#sectiontemplate)
or a [`sectionFooterTemplate`](#sectionfootertemplate) needs to be provided.
</Callout>

```ueml copy {3}
<App>
  <List
    data='{[...]}'
    defaultSections="{['meat']}"
    sectionBy="category">
    <property name="sectionTemplate">
      <VStack>
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </VStack>
    </property>
  </List>
</App>
```

<Playground
  name="Example: sectionBy"
  height={400}
  app={`
    <App>
      <List
        data='{${JSON.stringify(data, null, 2)}}'
        defaultSections="{['meat']}"
        sectionBy="category">
        <property name="sectionTemplate">
          <VStack>
            <Text variant="subtitle" value="{$item.sectionKey}" />
          </VStack>
        </property>
      </List>
    </App>
  `}
/>

### `sectionFooterTemplate`

Enables the customization of how the the footer of each section or group id displayed. Combine with [`sectionTemplate`](#sectiontemplate) to customize sections. You can use the `$item` context variable to access an item section and map its individual attributes.

The structure of `$item` in a `sectionFooterTemplate` is different compared to the one used in [`itemTemplate`](#itemtemplate).
An `$item` here looks like the following:

| Attribute    | Description                                                                                                   |
| ------------ | ------------------------------------------------------------------------------------------------------------- |
| id           | Unique identifier for the section. It is commonly generated from the attribute name provided via `sectionBy`. |
| sectionItems | The items filtered from the original data list that fall into this section.                                   |
| sectionKey   | The attribute name to section by provided via `sectionBy`                                                     |

```ueml copy {8-10}
<App>
  <List data='{[...]}' sectionBy="category">
    <property name="sectionTemplate">
      <VStack>
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </VStack>
    </property>
    <property name="sectionFooterTemplate">
      <ContentSeparator />
    </property>
  </List>
</App>
```

<Playground
  name="Example: sectionFooterTemplate"
  height={400}
  app={`
    <App>
      <List data='{${JSON.stringify(data, null, 2)}}' sectionBy="category">
        <property name="sectionTemplate">
          <VStack>
            <Text variant="subtitle" value="{$item.sectionKey}" />
          </VStack>
        </property>
        <property name="sectionFooterTemplate">
          <ContentSeparator />
        </property>
      </List>
    </App>
  `}
/>

### `sectionTemplate`

Enables the customization of how the sections or groups are displayed, similarly to the [`itemTemplate`](#itemtemplate). You can use the `$item` context variable to access an item section and map its individual attributes.

The structure of `$item` in a `sectionTemplate` is different compared to the one used in [`itemTemplate`](#itemtemplate).
An `$item` here looks like the following:

| Attribute    | Description                                                                                                   |
| ------------ | ------------------------------------------------------------------------------------------------------------- |
| id           | Unique identifier for the section. It is commonly generated from the attribute name provided via `sectionBy`. |
| sectionItems | The items filtered from the original data list that fall into this section.                                   |
| sectionKey   | The attribute name to section by provided via `sectionBy`                                                     |

```ueml copy {2-6}
<App>
  <List data='{[...]}' sectionBy="category">
    <property name="sectionTemplate">
      <Stack padding="$space-2">
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </Stack>
    </property>
  </List>
</App>
```

<Playground
  name="Example: sectionTemplate"
  height={400}
  app={`
    <App>
      <List data='{${JSON.stringify(data, null, 2)}}' sectionBy="category">
        <property name="sectionTemplate">
          <Stack padding="$space-2">
            <Text variant="subtitle" value="{$item.sectionKey}" />
          </Stack>
        </property>
      </List>
    </App>
  `}
/>

### `sectionsInitiallyExpanded`

This Boolean property defines whether the list sections are initially expanded.

### `selectedIndex`

This property scrolls to a specific item indicated by its index.

```ueml /selectedIndex="5"/
<App>
  <List selectedIndex="5" data='{[...]}' />
</App>
```

<Playground
  name="Example: selectedIndex"
  height={400}
  app={`
    <App>
      <List selectedIndex="5" data='{${JSON.stringify(data, null, 2)}}' />
    </App>
  `}
/>

## Events

This component does not have any events.

## Context Values

### `$item`

This property represents the value of an item in the data list.

## Exposed Members

This component does not expose any members.

## Styling

`List` is a layout container; its purpose is to render nested child components.
`List` has no theme variables to change its visual appearance.
