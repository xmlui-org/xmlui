import { Callout } from "nextra/components";

import data from  "../../component-samples/List/list-component-data.js";

# List [#component-list]

<Callout type="info" emoji="ℹ️">This component is in an **experimental** state; you can use it in your app. However, we may modify it, and it may even have breaking changes in the future.</Callout>

The `List` component is a robust layout container that renders associated data items as a list of components. `List` is virtualized; it renders only items that are visible in the viewport.

In the following examples all use the same list of data which looks like so:

| Id   | Name    | Quantity | Unit   | Category   |
| :--- | :------ | :------- | :----- | :--------- |
| 0    | Apples  | 5        | pieces | fruits     |
| 1    | Bananas | 6        | pieces | fruits     |
| 2    | Carrots | 100      | grams  | vegetables |
| 3    | Spinach | 1        | bunch  | vegetables |
| 4    | Milk    | 10       | liter  | diary      |
| 5    | Cheese  | 200      | grams  | diary      |

The data is provided as JSON.

## Properties

### `availableSections`

This property is an array of section names that the `List` will display.

### `data`

The component receives data via this property. The `data` property is a list of items that the `List` can display.

The component receives its data via this property.
The `data` property is an array of items that the `List` can display.

Note how the `List` infers the given data and provides a simple layout for it.
To tweak what data and how it is displayed, see the [`itemTemplate` section](#itemtemplate).

```ueml copy
<List data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: data"
  height={400}
  app={`<List data='{${JSON.stringify(data)}}' />`}
/>

### `defaultSections`

This property adds default sections for the `List` and displays the section headers even if no items fall into a particular section.

Note the `meat` section header before all the others in the list below:

> **Note:** For the `defaultSections` property to work, the data must be sectioned using the [`sectionBy`](#sectionby) property,
> and either a [`sectionTemplate`](#sectiontemplate) or a [`sectionFooterTemplate`](#sectionfootertemplate) needs to be provided.

```ueml copy {3}
<List 
  data='{${JSON.stringify(data)}}'
  defaultSections="{['meat']}"
  sectionBy="category"
>
  <property name="sectionTemplate">
    <Stack padding="$space-2">
      <Text variant="subtitle" value="{$item.sectionKey}" />
    </Stack>
  </property>
</List>
```

<Playground
  previewOnly
  name="Example: defaultSections"
  height={400}
  app={`
  <List 
    data='{${JSON.stringify(data)}}'
    defaultSections="{['meat']}"
    sectionBy="category"
  >
    <property name="sectionTemplate">
      <Stack padding="$space-2">
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </Stack>
    </property>
  </List>
  `}
/>

### `emptyListTemplate`

This property defines the template to display when the list is empty.

```ueml copy
<List>
  <property name="emptyListTemplate">
    <Stack width="100%" horizontalAlignment="center">
      <Text variant="strong" value="Empty..." />
    </Stack>
  </property>
</List>
```

<Playground
  previewOnly
  name="Example: emptyListTemplate"
  height={100}
  app={`
  <List>
    <property name="emptyListTemplate">
      <Stack width="100%" horizontalAlignment="center">
        <Text variant="strong" value="Empty..." />
      </Stack>
    </property>
  </List>
  `}
/>

### `idKey`

Denotes which attribute of an item acts as the ID or key of the item. Default is `"id"`.

```ueml /idKey="key"/
<List idKey="key" data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: idKey"
  height={400}
  app={`<List idKey="key" data='{${JSON.stringify(data)}}' />`}
/>

### `itemTemplate`

This property allows the customization of mapping data items to components. You can use the `$item` context variable to access an item and map its individual attributes.

Note how in the example below the `$item` is used to access the `name`, `quantity` and `unit` attributes.

```ueml copy {2-12}
<List data="{[...]}">
  <property name="itemTemplate">
    <Card>
      <HStack verticalAlignment="center" gap="0.5rem">
        <Icon name="info" />
        <Text value="{$item.name}" variant="strong" />
      </HStack>
      <HStack gap="0.5rem">
        <Text value="{$item.quantity}" />
        <Text value="{$item.unit}" variant="em" />
      </HStack>
    </Card>
  </property>
</List>
```

<Playground
  previewOnly
  name="Example: itemTemplate"
  height={400}
  app={`
  <List data='{${JSON.stringify(data)}}'>
    <property name="itemTemplate">
      <Card>
        <HStack verticalAlignment="center" gap="0.5rem">
          <Icon name="info" />
          <Text value="{$item.name}" variant="strong" />
        </HStack>
        <HStack gap="0.5rem">
          <Text value="{$item.quantity}" />
          <Text value="{$item.unit}" variant="em" />
        </HStack>
      </Card>
    </property>
  </List>
  `}
/>

### `items`

You can use `items` as an alias for the `data` property. When you bind the table to a data source (for example, you set the `datasource` property to a URL to fetch the data from), `data` represents the information obtained from the API.

### `limit`

This property limits the number of items displayed in the `List`.

```ueml /limit="4"/
<List limit="4" data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: limit"
  height={400}
  app={`<List limit="4" data='{${JSON.stringify(data)}}' />`}
/>

### `loading`

This property delays the rendering of children until it is set to `false`, or the component receives usable list items via the [`data`](#data) property.

```ueml copy
<List loading="true" />
```

<Playground
  previewOnly
  name="Example: loading"
  height={60}
  app={`<List loading="true" />`}
/>

### `orderBy`

This property enables the ordering of list items by specifying an attribute in the data.

```ueml /orderBy="{{ field: 'quantity', direction: 'desc' }}"/
<List orderBy="{{ field: 'quantity', direction: 'desc' }}" data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: orderBy"
  height={400}
  app={`<List orderBy="{{ field: 'quantity', direction: 'desc' }}" data='{${JSON.stringify(data)}}' />`}
/>

### `pageInfo`

This property contains the current page information. Setting this property also enures the `List` uses pagination.

It contains the following boolean attributes:

| Attribute            | Description                          |
| :------------------- | :------------------------------------|
| `hasPrevPage`        | Does the list have a previous page   |
| `hasNextPage`        | Does the list have a next page       |
| `isFetchingPrevPage` | _TBD_                                |
| `isFetchingNextPage` | _TBD_                                |

### `scrollAnchor`

This property pins the scroll position to either the `top` or the `bottom` of the list.

```ueml /scrollAnchor="bottom"/
<List scrollAnchor="bottom" data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: scrollAnchor"
  height={400}
  app={`<List scrollAnchor="bottom" data='{${JSON.stringify(data)}}' />`}
/>

### `sectionBy`

This property set which attribute of the data is used to group or section the list items. If the attribute does not appear in the data items, it will be ignored.

> **Note:** For the `sectionBy` property to work, either a [`sectionTemplate`](#sectiontemplate)
> or a [`sectionFooterTemplate`](#sectionfootertemplate) needs to be provided.

```ueml copy {3}
<List 
  data='{${JSON.stringify(data)}}'
  defaultSections="{['meat']}"
  sectionBy="category"
>
  <property name="sectionTemplate">
    <Stack padding="$space-2">
      <Text variant="subtitle" value="{$item.sectionKey}" />
    </Stack>
  </property>
</List>
```

<Playground
  previewOnly
  name="Example: sectionBy"
  height={400}
  app={`
  <List 
    data='{${JSON.stringify(data)}}'
    defaultSections="{['meat']}"
    sectionBy="category"
  >
    <property name="sectionTemplate">
      <Stack padding="$space-2">
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </Stack>
    </property>
  </List>
  `}
/>

### `sectionFooterTemplate`

Enables the customization of how the the footer of each section or group id displayed. Combine with [`sectionTemplate`](#sectiontemplate) to customize sections. You can use the `$item` context variable to access an item section and map its individual attributes.

The structure of `$item` in a `sectionFooterTemplate` is different compared to the one used in [`itemTemplate`](#itemtemplate).
An `$item` here looks like the following:

| Attribute    | Description                                                                                                   |
| ------------ | ------------------------------------------------------------------------------------------------------------- |
| id           | Unique identifier for the section. It is commonly generated from the attribute name provided via `sectionBy`. |
| sectionItems | The items filtered from the original data list that fall into this section.                                   |
| sectionKey   | The attribute name to section by provided via `sectionBy`                                                     |

```ueml copy {7-9}
<List data='{${JSON.stringify(data)}}' sectionBy="category">
  <property name="sectionTemplate">
    <Stack padding="$space-2">
      <Text variant="subtitle" value="{$item.sectionKey}" />
    </Stack>
  </property>
  <property name="sectionFooterTemplate">
    <ContentSeparator />
  </property>
</List>
```

<Playground
  previewOnly
  name="Example: sectionFooterTemplate"
  height={400}
  app={`
  <List data='{${JSON.stringify(data)}}' sectionBy="category">
    <property name="sectionTemplate">
      <Stack padding="$space-2">
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </Stack>
    </property>
    <property name="sectionFooterTemplate">
      <ContentSeparator />
    </property>
  </List>
  `}
/>

### `sectionTemplate`

Enables the customization of how the sections or groups are displayed, similarly to the [`itemTemplate`](#itemtemplate). You can use the `$item` context variable to access an item section and map its individual attributes.

The structure of `$item` in a `sectionTemplate` is different compared to the one used in [`itemTemplate`](#itemtemplate).
An `$item` here looks like the following:

| Attribute    | Description                                                                                                   |
| ------------ | ------------------------------------------------------------------------------------------------------------- |
| id           | Unique identifier for the section. It is commonly generated from the attribute name provided via `sectionBy`. |
| sectionItems | The items filtered from the original data list that fall into this section.                                   |
| sectionKey   | The attribute name to section by provided via `sectionBy`                                                     |

```ueml copy {2-6}
<List data='{${JSON.stringify(data)}}' sectionBy="category">
  <property name="sectionTemplate">
    <Stack padding="$space-2">
      <Text variant="subtitle" value="{$item.sectionKey}" />
    </Stack>
  </property>
</List>
```

<Playground
  previewOnly
  name="Example: sectionTemplate"
  height={400}
  app={`
  <List data='{${JSON.stringify(data)}}' sectionBy="category">
    <property name="sectionTemplate">
      <Stack padding="$space-2">
        <Text variant="subtitle" value="{$item.sectionKey}" />
      </Stack>
    </property>
  </List>
  `}
/>

### `sectionsInitiallyExpanded`

This Boolean property defines whether the list sections are initially expanded.

### `selectedIndex`

This property scrolls to a specific item indicated by its index.

```ueml /selectedIndex="5"/
<List selectedIndex="5" data="{[...]}" />
```

<Playground
  previewOnly
  name="Example: selectedIndex"
  height={400}
  app={`<List selectedIndex="5" data='{${JSON.stringify(data)}}' />`}
/>

## Events

### `requestFetchNextPage`

Obsolete.

**Note:** Not used in code.

### `requestFetchPrevPage`

Obsolete.

**Note:** Not used in code.

### `resetSelectedIndex`

Obsolete.

**Note:** Not used in code.

## Context Values

### `$item`

This property represents the value of an item in the data list.

## Exposed Members

This component does not expose any members.

## Styling

`List` is a layout container; its purpose is to render nested child components.
`List` has no theme variables to change its visual appearance.
