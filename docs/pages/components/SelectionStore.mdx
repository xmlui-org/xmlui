# SelectionStore

The `SelectionStore` is a non-visual component that may wrap components (items)
and manage their selection state to accommodate the usage of other actions.

For an example that covers all props, and API methods and values,
see the [`Selection-Aware Components`](#selection-aware-components) section.

## Using `SelectionStore`

A `SelectionStore` instance is a mediator between a component that can manage a list of selected items and the external context.
The wrapped component can report its selection state (which items are currently selected);
so that the external context can access and manage the selection state through the component's API.

## Selection-Aware Components

Some components know they are wrapped with a `SelectionStore` and manage their current selection state through it.
For example, the following sample `SelectionStore` wraps a `Table` with its `rowsSelectable` property set to true.
Whenever the user changes the selection state of a particular row, the `SelectionStore` updates its state accordingly.

```ueml copy
<VStack padding="$space-1">
  <H3>Rockets {rockets.value.length ? "(" + rockets.value.length + " selected)" : ""}</H3>
  <HStack gap="$space-0_5">
    <Button label="Select First" onClick="rockets.setSelectedRowIds([rockets.value?.[0]?.id])" />
    <Button label="Refresh Table" onClick="rockets.refreshSelection()" />
    <Button label="Clear Selection" onClick="rockets.clearSelection()" />
  </HStack>
  <SelectionStore id="rockets">
    <Table 
      width="100%" 
      rowsSelectable="{true}" 
      datasource="https://api.spacexdata.com/v3/rockets" 
      height="300px">
      <TableColumnDef header="Image" size="80px">
        <Image height="80px" fit="cover" src="{$item.flickr_images[0]}"/>
      </TableColumnDef>
      <TableColumnDef canSort="true" bindTo="country"/>
      <TableColumnDef canSort="true" bindTo="company"/>
    </Table>
  </SelectionStore>
</VStack>
```

The UI refreshes the number of selected items as you check or uncheck the rows in the following table:

<Playground
  name="Example: using SelectionStore"
  previewOnly
  height={400}
  app={`
  <VStack padding="$space-1">
    <H3>Rockets {rockets.value.length ? "(" + rockets.value.length + " selected)" : ""}</H3>
    <HStack gap="$space-0_5">
      <Button label="Select First" onClick="if (rockets.value?.length) rockets.setSelectedRowIds([rockets.value[0].id])" />
      <Button label="Refresh Table" onClick="rockets.refreshSelection()" />
      <Button label="Clear Selection" onClick="rockets.clearSelection()" />
    </HStack>
    <SelectionStore id="rockets">
      <Table 
        width="100%" 
        rowsSelectable="{true}" 
        datasource="https://api.spacexdata.com/v3/rockets" 
        height="300px">
        <TableColumnDef header="Image" size="80px">
          <Image height="80px" fit="cover" src="{$item.flickr_images[0]}"/>
        </TableColumnDef>
        <TableColumnDef canSort="true" bindTo="country"/>
        <TableColumnDef canSort="true" bindTo="company"/>
      </Table>
    </SelectionStore>
  </VStack>
  `}
/>

## Context Variables

This component does not have any context variables.

## Properties

### `idKey`

The selected items in the selection store needs to have a unique ID to use as an unambiguous key for that particular item.
This property uniquely identifies the selected object item via a given property.
By default, the key attribute is `"id"`.

## API

### `clearSelection`

This method clears the selection store by unselecting all previously selected items.

### `refreshSelection`

This method refreshes the selection by passing all underlying items as the method's 
`allItems`
 parameter.
The store calculates the intersection of the selected item IDs in its context and the item IDs in 
`allItems`
.
As a result, the selection store will release the items that are not in 
`allItems`
 anymore.

### `setSelectedRowIds`

This method returns an array holding the unique IDs of the selected items (according to the store's state).

### `value`

Enables the access of the list of selected items.

## Events

This component does not have any events.

## Styling

This component does not have any styles.
