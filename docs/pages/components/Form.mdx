import { Callout } from "nextra/components";
import pages from "../../meta/pages.js";

# Form

<Callout type="info" emoji="ℹ️">This component is in an **experimental** state; you can use it in your app. However, we may modify it, and it may even have breaking changes in the future.</Callout>

A `Form` is a fundamental component that displays user interfaces that allow users to input (or change) data and submit it to the app (a server) for further processing.

You can learn more about this component in the [Using Forms](/learning/using-components/forms/) article.

## Properties

### `buttonRowTemplate`

This property allows defining a custom component to display the buttons at the bottom of the form.

The following example demonstrates using it:

```ueml copy {9-18}
<Form id="searchForm" padding="0.5rem"
  subject="{{ search: 'Seattle', caseSensitive: false }}"
  onSubmit="() => {isSearching = true; delay(1000); isSearching = false; }"
  saveLabel="Search"
  var.isSearching="{false}">
    <Text>Please specify the name to include in the search:</Text>
    <FormItem bindTo="search" width="280px" />
    <FormItem type="checkbox" label="Case sensitive?" bindTo="caseSensitive" />
    <prop name="buttonRowTemplate">
      <HStack gap="0.5rem" borderTop="1px solid #ddd" verticalPadding="1rem">
        <Button label="Test Search Server" type="button"
          themeColor="secondary" variant="outlined"
          onClick="window.alert('Search server is ok.')"/>
        <SpaceFiller/>
        <Button type="submit" enabled="{!isSearching}" icon="search"
          label="{isSearching ? 'Searching...' : 'Search'}"/>
      </HStack>
    </prop>
</Form>
```

This example mimics a one-second search and turns off the submit button during the operation. Also, it adds a Test Search Server button:

<Playground
  previewOnly={true}
  name="Example: buttonRowTemplate"
  app={`
    <Form id="searchForm" padding="0.5rem" 
      subject="{{ search: 'Seattle', caseSensitive: false }}" 
      onSubmit="() => {isSearching = true; delay(1000); isSearching = false; }"
      saveLabel="Search" 
      var.isSearching="{false}">
        <Text>Please specify the name to include in the search:</Text>
        <FormItem bindTo="search" width="280px" />
        <FormItem type="checkbox" label="Case sensitive?" bindTo="caseSensitive" />
        <prop name="buttonRowTemplate">
          <HStack gap="0.5rem" borderTop="1px solid #ddd" verticalPadding="1rem">
            <Button label="Test Search Server" type="button" 
              themeColor="secondary" variant="outlined" 
              onClick="window.alert('Search server is ok.')"/>
            <SpaceFiller/>
            <Button type="submit" enabled="{!isSearching}" icon="search"
              label="{isSearching ? 'Searching...' : 'Search'}"/>
          </HStack>
        </prop>
    </Form>
  `}
/>

### `cancelLabel`

This property defines the label of the Cancel button, by default, "Cancel".

### `itemLabelBreak`

This boolean value indicates if form item labels can be split into multiple lines if it would overflow the available label width. Individual `FormItem` instances can override this property.

### `itemLabelPosition`

This property sets the position of the item labels within the form. The default value is `top`. Individual `FormItem` instances can override this property.

### `itemLabelWidth`

This property sets the width of the item labels within the form. Individual `FormItem` instances can override this property.

### `saveLabel`

This property defines the label of the Save button, by default, "Save".

### `subject`

This property sets the initial value of the form's data structure. The form infrastructure uses this value to set the initial state of form items within the form.

### `swapCancelAndSave`

By default, the Cancel button is to the left of the Save button. Set this property to `true` to swap them or `false` to keep their original location.

## Events

### `cancel`

The form infrastructure fires this event when the form is canceled.

### `reset`

The form infrastructure fires this event when the form is reset.

### `submit`

The form infrastructure fires this event when the form is submitted. The event argument is the current `subject` value to save.

```ueml copy {3}
<Form padding="0.5rem"
  subject="{{ name: 'Joe', age: 43 }}"
  onSubmit="(toSave) => window.alert(JSON.stringify(toSave))">
  <FlowLayout columnGap="12px" paddingBottom="6px">
    <FormItem bindTo="name" label="Customer name" width="50%" />
    <FormItem bindTo="age" label="Age" type="integer" width="50%"
      zeroOrPositive="true" />
  </FlowLayout>
</Form>
```

<Playground
  previewOnly={true}
  name="Example: submit"
  app={`
    <Form padding="0.5rem" 
      subject="{{ name: 'Joe', age: 43 }}" 
      onSubmit="(toSave) => window.alert(JSON.stringify(toSave))">
      <FlowLayout columnGap="12px" paddingBottom="6px">
        <FormItem bindTo="name" label="Customer name" width="50%" />
        <FormItem bindTo="age" label="Age" type="integer" width="50%"
          zeroOrPositive="true" />
      </FlowLayout>
    </Form>
  `}
/>

## Context Values

### `$subject`

This property represents the value of the form data. You can access the fields of the form using the IDs in the `bindTo` property of nested `FormItem` instances.

The following sample demonstrates enabling a field according to another's current value.

```ueml copy {4}
<Form 
  subject="{{ isEnabled: true, name: 'Joe' }}" horizontalPadding="1rem">
  <FormItem label="Enable name" bindTo="isEnabled" type="switch" />
  <FormItem enabled="{$subject.isEnabled}" label="Name" bindTo="name" />
</Form>
```

<Playground
  name="Example: referencing field values"
  previewOnly={true}
  height={250}
  app={`
    <Form 
      subject="{{ isEnabled: true, name: 'Joe' }}" horizontalPadding="1rem">
      <FormItem label="Enable name" bindTo="isEnabled" type="switch" />
      <FormItem enabled="{$subject.isEnabled}" label="Name" bindTo="name" />
    </Form>
  `}
/>

## Exposed Members

This component does not expose any members.

## Styling

You can use these theme variables to style a `Form` component:

- `gap-Form`: the gap between the components directly nested into a form.
- `gap-buttonRow-Form`: the gap between the Cancel and Save buttons in the button row of a form.

### Theme Variables

| Variable | Default Value (Light) | Default Value (Dark) |
| --- | --- | --- |
| gap-Form | $space-4 | $space-4 |
| gap-buttonRow-Form | $space-4 | $space-4 |

