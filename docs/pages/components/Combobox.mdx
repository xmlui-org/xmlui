# Combobox

A `Combobox` is a component that combines the features of a dropdown list and an input field.

## Using Combobox

You can use a `Combobox` to select a text from a dropdown list (click the component to display the list) or type an arbitrary text. As you type the text, it works as a filter for the items on the list.

Define the list of available options with the nested `Option` component, as this example shows:

```ueml copy 
<Combobox id="myCombo">
  <Option label="Jane Arrington" value="ja" />
  <Option label="John Sniper" value="js" />
  <Option label="Emily Gold" value="eg" />
  <Option label="Art Heather" value="ah" />
</Combobox>
```

<Playground
  previewOnly
  name="Example: using Combobox"
  height={200}
  app={`
    <Combobox id="myCombo">
      <Option label="Jane Arrington" value="ja" />
      <Option label="John Sniper" value="js" />
      <Option label="Emily Gold" value="eg" />
      <Option label="Art Heather" value="ah" />
    </Combobox>
  `}
/>

Combobox supports data binding. The following example shows how you can programmatically define options:

```ueml copy
<Combobox id="myCombo">
  <Items items="{[1, 2, 3, 4, 5]}">
    <Option label="Option {$item}" value="{$item}" />
  </Items>
</Combobox>
```

<Playground
  previewOnly
  name="Example: Combobox with data"
  height={220}
  app={`
    <Combobox id="myCombo">
      <Items items="{[1, 2, 3, 4, 5]}">
        <Option label="Option {$item}" value="{$item}" />
      </Items>
    </Combobox>
  `}
/>

## Context Variables

This component does not have any context variables.

## Properties

### `autoFocus`

If this boolean prop is set to `true`, the `Combobox` will be focused when it appears on the UI.
The default is `false`.

### `emptyListTemplate`

With this property, you can define the template to display when the search list (after filtering)
contains no element.

```ueml copy {6-8}
<Combobox id="myCombo">
  <Option label="Jane Arrington" value="ja" />
  <Option label="John Sniper" value="js" />
  <Option label="Emily Gold" value="eg" />
  <Option label="Art Heather" value="ah" />
  <prop name="emptyListTemplate">
    <Text variant="title" value="No names match with your filter..." />
  </prop>
</Combobox>
```

Type a "w" to display an empty list:

<Playground
  previewOnly
  name="Example: emptyListTemplate"
  height={200}
  app={`
    <Combobox id="myCombo">
      <Option label="Jane Arrington" value="ja" />
      <Option label="John Sniper" value="js" />
      <Option label="Emily Gold" value="eg" />
      <Option label="Art Heather" value="ah" />
      <prop name="emptyListTemplate">
        <Text variant="title" value="No names match with your filter..." />
      </prop>
    </Combobox>
  `}
/>

### `enabled`

Controls whether the input field is enabled (`true`) or disabled (`false`).

### `endIcon`

This property sets the icon the right side of the input field (in a left-to-right display).

### `endText`

This property sets a text to appear on the right side of the input field (in a left-to-right display).

### `initialValue`

The initial value displayed in the input field.

```ueml copy /initialValue="eg"/
<Combobox id="myCombo" initialValue="eg">
  <Option label="Jane Arrington" value="ja" />
  <Option label="John Sniper" value="js" />
  <Option label="Emily Gold" value="eg" />
  <Option label="Art Heather" value="ah" />
</Combobox>
```

The following list will show the item with "eg" as its initial value:

<Playground
  previewOnly
  name="Example: initialValue"
  height={200}
  app={`
    <Combobox id="myCombo" initialValue="eg">
      <Option label="Jane Arrington" value="ja" />
      <Option label="John Sniper" value="js" />
      <Option label="Emily Gold" value="eg" />
      <Option label="Art Heather" value="ah" />
    </Combobox>
  `}
/>

### `labelId`

You can specify the identifier of a component acting as its label. When you click the label,
the component behaves as you clicked it.

### `maxLength`

The maximum length of the input that the field accepts.

### `optionTemplate`

You can define a template for the option items of the 
`Combobox`
.

```ueml copy {6-8}
<Combobox id="myCombo">
  <Option label="Jane Arrington" value="ja" />
  <Option label="John Sniper" value="js" />
  <Option label="Emily Gold" value="eg" />
  <Option label="Art Heather" value="ah" />
  <prop name="optionTemplate">
    <Text variant="strong" color="purple" value="{$item.label}" />
  </prop>
</Combobox>
```

Click the `Combobox` to display its options:

<Playground
  previewOnly
  name="Example: optionTemplate"
  height={200}
  app={`
    <Combobox id="myCombo">
      <Option label="Jane Arrington" value="ja" />
      <Option label="John Sniper" value="js" />
      <Option label="Emily Gold" value="eg" />
      <Option label="Art Heather" value="ah" />
      <prop name="optionTemplate">
        <Text variant="strong" color="purple" value="{$item.label}" />
      </prop>
    </Combobox>
  `}
/>

### `placeholder`

A placeholder text that is visible in the input field when its empty.

### `readOnly`

This boolean determines whether the input field can be modified or not.

### `required`

Set this property to `true` to indicate it must have a value before submitting the containing form.

### `startIcon`

This property sets the icon the left side of the input field (in a left-to-right display).
The value must be a valid icon name, otherwise nothing will be rendered.

### `startText`

This property sets a text to appear on the right side of the input field (in a left-to-right display).

### `validationStatus`

This prop is used to visually indicate status changes reacting to form field validation.

## API

### `focus`

This API method focuses the input field.

```ueml copy /onClick="inputControl.focus()"/
<VStack padding="$space-1" gap="$space-0_5">
  <Button label="Focus Input" onClick="inputControl.focus()" />
  <Combobox id="inputControl">
    <Option value="opt1" label="first"/>
    <Option value="opt2" label="second"/>
    <Option value="opt3" label="third"/>
  </Combobox>
</VStack>
```

<Playground
  previewOnly
  name="Example: focus()"
  height={200}
  app={`
  <VStack padding="$space-1" gap="$space-0_5">
    <Button label="Focus Input" onClick="inputControl.focus()" />
    <Combobox id="inputControl">
      <Option value="opt1" label="first"/>
      <Option value="opt2" label="second"/>
      <Option value="opt3" label="third"/>
    </Combobox>
  </VStack>
  `}
/>

## Events

### `didChange`

This event is triggered after the user has changed the field value.

```ueml copy /onDidChange="(val) => field = val"/
<VStack gap="0.5rem" var.field="">
  <Combobox initialValue="{field}" onDidChange="(val) => field = val">
    <Option value="opt1" label="first"/>
    <Option value="opt2" label="second"/>
    <Option value="opt3" label="third"/>
  </Combobox>
  <Text value="{field}" />
</VStack>
```

Select an option and see how the text underneath is updated in parallel.

<Playground
  previewOnly
  name="Example: initialValue"
  height={200}
  app={`
    <VStack gap="0.5rem" var.field="">
      <Combobox initialValue="{field}" onDidChange="(val) => field = val">
        <Option value="opt1" label="first"/>
        <Option value="opt2" label="second"/>
        <Option value="opt3" label="third"/>
      </Combobox>
      <Text value="{field}" />
    </VStack>
  `}
/>

### `gotFocus`

This event fires when the component is focused.

```ueml copy {5-6}
<VStack padding="$space-1" gap="$space-0_5">
  <var name="isFocused" value="{false}" />
  <Text value="Input control is focused: {isFocused}" />
  <Combobox
    onGotFocus="isFocused = true"
    onLostFocus="isFocused = false"
  >
    <Option value="opt1" label="first"/>
    <Option value="opt2" label="second"/>
    <Option value="opt3" label="third"/>
  </Combobox>
</VStack>
```

<Playground
  previewOnly
  name="Example: gotFocus/lostFocus"
  height={200}
  app={`
  <VStack padding="$space-1" gap="$space-0_5">
    <var name="isFocused" value="{false}" />
    <Text value="Input control is focused: {isFocused}" />
    <Combobox
      onGotFocus="isFocused = true"
      onLostFocus="isFocused = false"
    >
      <Option value="opt1" label="first"/>
      <Option value="opt2" label="second"/>
      <Option value="opt3" label="third"/>
    </Combobox>
  </VStack>
  `}
/>

### `lostFocus`

This event fires when the component loses focus.

See the example in the [gotFocus event section](#gotfocus).

## Styling

The `Combobox` component uses these theme variables:

- `min-height-Combobox`

These variables have 4 variants depending on the [validationStatus](#validationstatus) denoted by `|status|`.
If the status segment is omitted, the style will be applied to all statuses.

- `radius-Combobox-|status|`
- `font-size-Combobox-|status|`
- `color-placeholder-Combobox-|status|`
- `thickness-border-Combobox-|status|`

- `thickness-outline-Combobox-|status|--focus`
- `color-outline-Combobox-|status|--focus`
- `style-outline-Combobox-|status|--focus`
- `offset-outline-Combobox-|status|--focus`

```json copy
"radius-Combobox-default": "10px",
"color-placeholder-Combobox-error": "crimson"
```

In addition to the validation statuses,
the variables below are associated with styles for `hover` and `disabled` interaction states denoted by `|interact|` in their signature:

- `color-border-Combobox-|status|--|interact|`
- `color-bg-Combobox-|status|--|interact|`
- `shadow-Combobox-|status|--|interact|`
- `color-text-Combobox-|status|--|interact|`

```json copy
"color-bg-Combobox-default--disabled": "gray",
"color-text-Combobox-error--active": "lightcoral"
```

Theme variables to set the dropdown menu styles:

- `color-bg-menu-Combobox`
- `shadow-menu-Combobox`
- `radius-menu-Combobox`
- `color-text-indicator-Combobox`

Theme variables to set the selection styles in a dropdown menu:

- `color-text-value-Combobox`
- `color-bg-value-Combobox`

Theme variables to set the styles of an unselected item:

- `color-bg-item-Combobox--hover`
- `color-bg-item-Combobox--active`
- `color-text-item-Combobox--disabled`
